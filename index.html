<html>
  <head>
    <title>Zagreb zombie run</title>
  </head>
  <style>
#zombie_map {
    height: 100%;
    width: 100%;
    left: 0;
    position: absolute;
    top: 0;
    background-color: grey;}
</style>
  <body>
  My zombie map
    <h1>Zombir run</h1>  
	
<div id="zombie_map"></div>

<script>
    var zombie_map;
    var score = 0;
    var tolerance = 200;
    var old_position;	
    all_markers = [];
    var data = `45.813755827195244 15.964117872056661 zombie.png
45.81237987232131 15.956221448716818 zombie.png
45.810644924243746 15.956092702684103 food.png
45.81055518408005 15.953989850816427 beverage.png
45.81444379188411 15.968108999070822 beverage.png
45.80962773607203 15.964422225952148 hospital.png
45.80921079792846 15.966263639268576 hospital.png
45.81405667682525 15.967551099595724 weapons.png
45.81004838738313 15.955749379930197 weapons.png
45.80927062616437 15.965104924974142 weapons.png
45.81244143070706 15.96115671330422 weapons.png
45.813578090266766 15.955835210618673 beverage.png
45.80930054025821 15.960813390550314 zombie.png
45.81501197962524 15.973434448242188 zombie.png
45.813173991594354 15.971014625378421 zombie.png
45.81042201910133 15.972087508984378 zombie.png
45.809807219243396 15.987167358398438 zombie.png
45.80832803589475 15.984966902099623 zombie.png
45.80769982558201 15.978186277709975 zombie.png
45.810631413092274 15.97857251580812 zombie.png
45.80766991062847 15.970547346435561 food.png
45.807041692893385 15.99003091271974 food.png
45.80811863324438 15.96458211358644 food.png
45.8143405475898 15.968873648010268 food.png
45.80674253910076 15.96956029351808 beverage.png
45.80467833414454 15.970204023681655 beverage.png
45.80458858436786 15.973594335876479 beverage.png
45.806024563443664 15.983979849182143 beverage.png
45.80680236998782 15.992691664062514 beverage.png
45.79677980029818 15.990975050292983 beverage.png
45.796630196049826 15.995352415405288 beverage.png
45.79442939674756 15.992445945739746 beverage.png
45.79411678462342 15.997369436584487 beverage.png
45.79743805421929 15.999601034484877 beverage.png
45.799173413647644 15.999601034484877 beverage.png
45.79950252744224 15.997498182617202 beverage.png
45.79701916626011 16.004278807006852 beverage.png
45.799083655002626 15.997755674682631 beverage.png
45.798215980646425 15.998399404846205 beverage.png
45.79373334535754 15.988201476201427 beverage.png
45.794750699209764 15.98661360846461 beverage.png
45.794212102425014 15.985326148137462 beverage.png
45.79400264671406 15.98588404761256 beverage.png
45.79277581888393 15.987085677251232 beverage.png
45.79262620388633 15.981549597844493 food.png
45.7908984804572 15.98909854888916 food.png
45.792675804603306 15.994810439214122 food.png
45.79429162388407 15.991162634953868 food.png
45.79871992546335 15.993437148198497 food.png
45.80565933174382 15.98163542853297 food.png
45.80101186368741 15.97987174987793 food.png
45.80051353499397 15.975541449651134 food.png
45.799107333431984 15.977773047551524 weapons.png
45.799974993908094 15.991892195805919 weapons.png
45.79315302293595 15.990733481511485 weapons.png
45.791507247010564 15.99759993658961 weapons.png
45.79916717251928 15.999273635014903 weapons.png
45.800633210083916 15.998586989507091 weapons.png
45.79935713864048 16.001303595501728 weapons.png
45.79825010889698 15.99452297111208 weapons.png
45.80650742250652 15.991218489605732 weapons.png
45.80611851853283 15.970619124371357 weapons.png
45.805909107576234 15.970876616436787 hospital.png
45.807105731010495 15.97478191276247 hospital.png
45.80657643366876 15.978670120239258 hospital.png
45.798459548643486 15.993235510784931 hospital.png
45.79085937387094 15.998084944683857 hospital.png
45.78726837960013 16.002848547894306 hospital.png
45.79705329524367 16.000616949993915 hospital.png
45.79439029263882 15.99375049491579 hospital.png
45.80058382158589 15.99752704520876 hospital.png
45.7986989073898 16.000831526715107 hospital.png
45.80178055940844 15.993879240948505 hospital.png
45.79825010889698 16.001818579632587 zombie.png
45.79780130678934 15.998728674847431 zombie.png
45.80076333389801 16.000616949993915 zombie.png
45.80043422755068 15.998642844158955 zombie.png
45.801182193710325 15.994437140423603 zombie.png
45.79391153710212 15.994866293865986 zombie.png
45.79364223530532 15.99752704520876 zombie.png
45.790649905559235 15.996797484356708 zombie.png
45.78945292867609 16.000616949993915 zombie.png
45.79337293220717 15.985725325543232 zombie.png
45.80073341521948 15.979202193219013 zombie.png
45.8008830084514 15.97679893394167 zombie.png
45.79498873127594 15.972679060894794 zombie.png
45.79854930829385 15.973494452435322 zombie.png
45.79639503677741 15.9750394048279 zombie.png
45.79597614097755 15.979459685284443 zombie.png
45.7975619441872 15.979459685284443 zombie.png
45.80421305518083 15.965838432312012 zombie.png
45.80601509118082 15.966816586146582 zombie.png
45.812542347161134 15.944758099208105 zombie.png
45.8132562506071 15.94887797225498 zombie.png
45.81567707275465 15.946303051600683 zombie.png
45.81486947905051 15.953899067530859 zombie.png
45.814091785155085 15.952912014613378 hospital.png
45.81202785254682 15.953684490809668 hospital.png
45.81546769773374 15.943599384913671 hospital.png
45.81681366627508 15.944843929896582 hospital.png
45.81454045603555 15.94437186110996 weapons.png
45.81974477408264 15.94411436904453 weapons.png
45.82255609986161 15.943513554225195 weapons.png
45.8184586947564 15.944286030421484 food.png
45.8175015931885 15.947805088649023 food.png
45.815527519248626 15.94214026320957 food.png
45.82174860592441 15.944028538356054 food.png
45.825187850661926 15.944328945765722 food.png
45.8271914866015 15.94488684524082 food.png
45.828896015625695 15.94415728438877 beverage.png
45.82438039489626 15.943599384913671 beverage.png
45.81418151962037 15.946989697108496 beverage.png
45.82094110027549 15.944071453700293 zombie.png
45.82381217826279 15.943556469569433 zombie.png
45.822855168718064 15.939222019801367 zombie.png
45.81893723937121 15.940251988063086 hospital.png
45.81748081943947 15.940523486096101 hospital.png
45.814280390406196 15.942325930554109 food.png
45.81410092164966 15.939107279736238 food.png
45.81185751339393 15.937991480786042 food.png
45.812216464787646 15.931725840527253 food.png
45.81206690198809 15.935502390820222 weapons.png
45.81487861541751 15.936189036328035 weapons.png
45.80441473317877 15.953955988842683 weapons.png
45.79902946516968 15.959620814282136 weapons.png
45.805372059663 15.944342951733308 weapons.png
45.80130330848782 15.946402888256745 hospital.png
45.7996278539871 15.953097681957917 hospital.png
45.797712987150625 15.945201258618074 hospital.png
45.797272159635966 15.94826970573111 hospital.png
45.798842966114584 15.949685912090974 zombie.png
45.7982744888829 15.94977174277945 weapons.png
45.79625485181544 15.948698859173494 weapons.png
45.80027909328705 15.946917872387605 weapons.png
45.80129632763846 15.948355536419587 weapons.png
45.79471389430444 15.949170927960115 weapons.png
45.7980052081699 15.948183875042634 food.png
45.79535721184465 15.948891978222566 food.png
45.798424088716715 15.948977808911042 beverage.png
45.797975288010385 15.949364047009187 beverage.png
45.79622493071603 15.948012213665681 beverage.png
45.796239891267746 15.950908999401765 beverage.png
45.78047622434705 15.938163142162995 beverage.png
45.779997349291484 15.907435755688386 beverage.png
45.79017255930229 15.971808772045808 beverage.png
45.78646181551379 15.957732539135652 beverage.png
45.78358881195565 15.90108428474112 hospital.png
45.787898261768596 15.964598994213777 hospital.png
45.78263111119962 15.904174189526277 weapons.png
45.77664510874028 15.918937067944245 weapons.png
45.80032373308636 15.919876098632812 weapons.png
45.80537205966303 15.93161777363282 weapons.png
45.77760291231961 15.940544165234382 food.png
45.79735394229277 15.936767614941413 food.png
45.79436181184156 15.959941900830085 food.png
45.79041195364451 15.977108038525397 food.png
45.811833583127495 15.913250006298835 food.png
45.77915930804749 15.911705053906257 zombie.png
45.78813766587893 15.919773138623054 zombie.png
45.7957980545084 15.92286304340821 zombie.png
45.80238035977615 15.935394323925788 zombie.png
45.79436181184156 15.941230810742194 zombie.png
45.786581520782185 15.894710577587897 zombie.png
45.78526474869189 15.953933752636726 zombie.png
45.78837706896107 15.994617498974616 zombie.png
45.784307076726286 15.99925235615235 zombie.png
45.78753915367516 15.98277286396485 zombie.png
45.78909527203807 15.970413244824226 weapons.png
45.787898261768596 15.987579382519538 weapons.png
45.78646181551379 15.994445837597663 weapons.png
45.81207271669428 15.91030136100882 weapons.png
45.81243166670102 15.907597694321808 weapons.png
45.814867978752794 15.905848894044098 weapons.png
45.81559331809786 15.905162248536286 weapons.png
45.81615414101196 15.906430090611092 weapons.png
45.81737297666874 15.906011666004769 weapons.png
45.81926473622892 15.905786360447518 weapons.png
45.820969507967654 15.906591023151986 weapons.png
45.822322820295966 15.906440819447152 weapons.png
45.821395692746584 15.905711258595101 food.png
45.82603458184176 15.905539597218148 food.png
45.82486079439618 15.905421580021493 food.png
45.82180611308693 15.906589150063342 food.png
45.81270605242212 15.900999426476305 beverage.png
45.8318466065522 15.90340268575365 beverage.png
45.81839308723679 15.90588104688341 beverage.png
45.81985861885742 15.90412151776964 beverage.png
45.82246059016068 15.902233242623156 beverage.png
45.816598506187425 15.903005718819445 hospital.png
45.820486692029554 15.906438946358508 hospital.png
45.82817253741959 15.90489399396593 hospital.png
45.832000111256455 15.906653523079699 hospital.png
45.83101334005906 15.90489399396593 zombie.png
45.8483721302715 15.901534689200568 zombie.png
45.84111817660797 15.900328159332275 zombie.png
45.840733920121764 15.899925363791633 zombie.png
45.84326017613992 15.896277559531379 zombie.png
45.84767929765372 15.896449220908332 zombie.png
45.844181652012885 15.895719660056281 zombie.png
45.809423271413614 15.919793498029774 zombie.png
45.77483192970885 15.92940653513915 zombie.png
45.77626867562358 15.924600016584462 zombie.png
45.78201528911777 15.946915995588368 zombie.png
45.77531084912671 15.938676249494618 zombie.png
45.78608544867074 15.911725413312977 zombie.png
45.779740658762584 15.929578196516102 zombie.png
45.78524749893703 16.002534281721182 zombie.png
45.78572632889866 15.958073985090321 food.png
45.78596574233711 15.964768778791493 food.png
45.788479521361786 15.97781504343993 food.png
45.794344564901856 15.966142069807118 hospital.png
45.79530206442226 15.955670725812977 hospital.png
45.794943004030024 15.93489969920165 hospital.png
45.80607280042034 15.949662577619618 hospital.png`;
    var markers = data.split("\n");
    function initMap() {
            zombie_map = new google.maps.Map(document.getElementById('zombie_map'), {
            zoom: 15,
            center: {lat: 53.5982961, lng: 9.9394004}  
        });
	old_position = new google.maps.Marker({
        position: new google.maps.LatLng(53.5982961, 9.9394004),
        map: zombie_map,
        icon: 'player.png'
	}); 
	for(var i=0; i < markers.length; i++){
        var marker_data = markers[i].trim();
	marker_data = marker_data.split(" ");
	var latitude = marker_data[0];
        var longitude = marker_data[1];
        var emoji = marker_data[2];
	var marker_position = new google.maps.LatLng(latitude, longitude);
	var marker = new google.maps.Marker({
        position: marker_position,
        map: zombie_map,
        icon: emoji
	});
        all_markers.push(marker);
	}
	if(navigator.geolocation) {
    navigator.geolocation.watchPosition(set_my_position);
    }
    else {
    alert("Geolocation doesn't work in your browser");
    }
    }
	function set_my_position(position){
	old_position.setMap(null);
	var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	var player = 'player.png'
	var marker = new google.maps.Marker({
    position: pos,
    map: zombie_map,
	icon: player
    });
    old_position = marker;
    for(var i=0; i < all_markers.length; i++){
    var distance = google.maps.geometry.spherical.computeDistanceBetween(pos, all_markers[i].getPosition());
    if( distance < tolerance ){
    var what_is_it = all_markers[i].getIcon();
    what_is_it = what_is_it.replace(".png", "");
    alert("Found the " + what_is_it);
    all_markers[i].setMap(null);
    all_markers[i]=null;	    
    if( what_is_it != "zombie" ){
        score +=10;
	alert("Your score is " + score)
    } else {
    score += -10;
    alert("Njammy...mmmm, brains " + score);
    if (score < 0){
    alert("You walk like a zombie, now ")
    } else {
    alert("Ruuuuuun! Try to stay away from here! There is still chance for human race ")
    }	    
    }	    
    }		
    }
    }


	
</script>
	<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAycYqIvGk3fBpwX4wotJq5r0HMnl8UZSY&callback=initMap&libraries=geometry">
    </script>
  </body>
</html>
